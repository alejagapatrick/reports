<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - total_coverage.info - src/wallet/init.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">src/wallet</a> - init.cpp<span style="font-size: 80%;"> (source / <a href="init.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">total_coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">64</td>
            <td class="headerCovTableEntry">71</td>
            <td class="headerCovTableEntryHi">90.1 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2000-01-01 12:00:00</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">7</td>
            <td class="headerCovTableEntry">8</td>
            <td class="headerCovTableEntryMed">87.5 %</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntry">135</td>
            <td class="headerCovTableEntry">282</td>
            <td class="headerCovTableEntryLo">47.9 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">           Branch data     Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>                :            : // Copyright (c) 2009-2010 Satoshi Nakamoto</a>
<span class="lineNum">       2 </span>                :            : // Copyright (c) 2009-2018 The Bitcoin Core developers
<span class="lineNum">       3 </span>                :            : // Distributed under the MIT software license, see the accompanying
<span class="lineNum">       4 </span>                :            : // file COPYING or http://www.opensource.org/licenses/mit-license.php.
<span class="lineNum">       5 </span>                :            : 
<span class="lineNum">       6 </span>                :            : #include &lt;chainparams.h&gt;
<span class="lineNum">       7 </span>                :            : #include &lt;init.h&gt;
<span class="lineNum">       8 </span>                :            : #include &lt;interfaces/chain.h&gt;
<span class="lineNum">       9 </span>                :            : #include &lt;net.h&gt;
<span class="lineNum">      10 </span>                :            : #include &lt;scheduler.h&gt;
<span class="lineNum">      11 </span>                :            : #include &lt;outputtype.h&gt;
<span class="lineNum">      12 </span>                :            : #include &lt;util/error.h&gt;
<span class="lineNum">      13 </span>                :            : #include &lt;util/system.h&gt;
<span class="lineNum">      14 </span>                :            : #include &lt;util/moneystr.h&gt;
<span class="lineNum">      15 </span>                :            : #include &lt;validation.h&gt;
<span class="lineNum">      16 </span>                :            : #include &lt;walletinitinterface.h&gt;
<span class="lineNum">      17 </span>                :            : #include &lt;wallet/rpcwallet.h&gt;
<span class="lineNum">      18 </span>                :            : #include &lt;wallet/wallet.h&gt;
<a name="19"><span class="lineNum">      19 </span>                :            : #include &lt;wallet/walletutil.h&gt;</a>
<span class="lineNum">      20 </span>                :            : 
<span class="lineNum">      21 </span>                :<span class="lineCov">        495 : class WalletInit : public WalletInitInterface {</span>
<span class="lineNum">      22 </span>                :            : public:
<a name="23"><span class="lineNum">      23 </span>                :            : </a>
<span class="lineNum">      24 </span>                :            :     //! Was the wallet component compiled in.
<span class="lineNum">      25 </span>                :<span class="lineCov">        777 :     bool HasWalletSupport() const override {return true;}</span>
<span class="lineNum">      26 </span>                :            : 
<span class="lineNum">      27 </span>                :            :     //! Return the wallets help message.
<span class="lineNum">      28 </span>                :            :     void AddWalletOptions() const override;
<span class="lineNum">      29 </span>                :            : 
<span class="lineNum">      30 </span>                :            :     //! Wallets parameter interaction
<span class="lineNum">      31 </span>                :            :     bool ParameterInteraction() const override;
<span class="lineNum">      32 </span>                :            : 
<span class="lineNum">      33 </span>                :            :     //! Add wallets that should be opened to list of init interfaces.
<span class="lineNum">      34 </span>                :            :     void Construct(InitInterfaces&amp; interfaces) const override;
<span class="lineNum">      35 </span>                :            : };
<span class="lineNum">      36 </span>                :            : 
<a name="37"><span class="lineNum">      37 </span>                :<span class="lineCov">        495 : const WalletInitInterface&amp; g_wallet_init_interface = WalletInit();</span></a>
<span class="lineNum">      38 </span>                :            : 
<span class="lineNum">      39 </span>                :<span class="lineCov">        420 : void WalletInit::AddWalletOptions() const</span>
<span class="lineNum">      40 </span>                :            : {
<span class="lineNum">      41 </span>[<span class="branchCov" title="Branch 3 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 4 was not taken"> - </span>][<span class="branchCov" title="Branch 6 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 7 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-addresstype&quot;, strprintf(&quot;What type of addresses to use (\&quot;legacy\&quot;, \&quot;p2sh-segwit\&quot;, or \&quot;bech32\&quot;, default: \&quot;%s\&quot;)&quot;, FormatOutputType(DEFAULT_ADDRESS_TYPE)), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      42 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-avoidpartialspends&quot;, strprintf(&quot;Group outputs by address, selecting all or none, instead of selecting on a per-output basis. Privacy is improved as an address is only used once (unless someone sends to it after spending from it), but may result in slightly higher fees as suboptimal coin selection may result due to the added limitation (default: %u)&quot;, DEFAULT_AVOIDPARTIALSPENDS), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      43 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-changetype&quot;, &quot;What type of change to use (\&quot;legacy\&quot;, \&quot;p2sh-segwit\&quot;, or \&quot;bech32\&quot;). Default is same as -addresstype, except when -addresstype=p2sh-segwit a native segwit output is used when sending to a native segwit address)&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      44 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-disablewallet&quot;, &quot;Do not load the wallet and disable wallet RPC calls&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      45 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-discardfee=&lt;amt&gt;&quot;, strprintf(&quot;The fee rate (in %s/kB) that indicates your tolerance for discarding change by adding it to the fee (default: %s). &quot;</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      46 </span>                :            :                                                                 &quot;Note: An output is discarded if it is dust at this rate, but we will always discard up to the dust relay fee and a discard fee above that is limited by the fee estimate for the longest target&quot;,
<span class="lineNum">      47 </span>                :<span class="lineCov">        420 :                                                               CURRENCY_UNIT, FormatMoney(DEFAULT_DISCARD_FEE)), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      48 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-fallbackfee=&lt;amt&gt;&quot;, strprintf(&quot;A fee rate (in %s/kB) that will be used when fee estimation has insufficient data (default: %s)&quot;,</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      49 </span>                :<span class="lineCov">        420 :                                                                CURRENCY_UNIT, FormatMoney(DEFAULT_FALLBACK_FEE)), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      50 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-keypool=&lt;n&gt;&quot;, strprintf(&quot;Set key pool size to &lt;n&gt; (default: %u)&quot;, DEFAULT_KEYPOOL_SIZE), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      51 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-mintxfee=&lt;amt&gt;&quot;, strprintf(&quot;Fees (in %s/kB) smaller than this are considered zero fee for transaction creation (default: %s)&quot;,</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      52 </span>                :<span class="lineCov">        420 :                                                             CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MINFEE)), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      53 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-paytxfee=&lt;amt&gt;&quot;, strprintf(&quot;Fee (in %s/kB) to add to transactions you send (default: %s)&quot;,</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      54 </span>        [<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>]:<span class="lineCov">        420 :                                                             CURRENCY_UNIT, FormatMoney(CFeeRate{DEFAULT_PAY_TX_FEE}.GetFeePerK())), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      55 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-rescan&quot;, &quot;Rescan the block chain for missing wallet transactions on startup&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      56 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-salvagewallet&quot;, &quot;Attempt to recover private keys from a corrupt wallet on startup&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      57 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-spendzeroconfchange&quot;, strprintf(&quot;Spend unconfirmed change when sending transactions (default: %u)&quot;, DEFAULT_SPEND_ZEROCONF_CHANGE), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      58 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-txconfirmtarget=&lt;n&gt;&quot;, strprintf(&quot;If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)&quot;, DEFAULT_TX_CONFIRM_TARGET), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      59 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-upgradewallet&quot;, &quot;Upgrade wallet to latest format on startup&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      60 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-wallet=&lt;path&gt;&quot;, &quot;Specify wallet database path. Can be specified multiple times to load multiple wallets. Path is interpreted relative to &lt;walletdir&gt; if it is not absolute, and will be created if it does not exist (as a directory containing a wallet.dat file and log files). For backwards compatibility this will also accept names of existing data files in &lt;walletdir&gt;.)&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      61 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-walletbroadcast&quot;,  strprintf(&quot;Make the wallet broadcast transactions (default: %u)&quot;, DEFAULT_WALLETBROADCAST), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      62 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-walletdir=&lt;dir&gt;&quot;, &quot;Specify directory to hold wallets (default: &lt;datadir&gt;/wallets if it exists, otherwise &lt;datadir&gt;)&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      63 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-walletnotify=&lt;cmd&gt;&quot;, &quot;Execute command when a wallet transaction changes (%s in cmd is replaced by TxID)&quot;, false, OptionsCategory::WALLET);</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      64 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-walletrbf&quot;, strprintf(&quot;Send transactions with full-RBF opt-in enabled (RPC only, default: %u)&quot;, DEFAULT_WALLET_RBF), false, OptionsCategory::WALLET);</span>
<span class="lineNum">      65 </span>[<span class="branchCov" title="Branch 1 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-zapwallettxes=&lt;mode&gt;&quot;, &quot;Delete all wallet transactions and only recover those parts of the blockchain through -rescan on startup&quot;</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">      66 </span>                :            :                                &quot; (1 = keep tx meta data e.g. payment request information, 2 = drop tx meta data)&quot;, false, OptionsCategory::WALLET);
<span class="lineNum">      67 </span>                :            : 
<span class="lineNum">      68 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-dblogsize=&lt;n&gt;&quot;, strprintf(&quot;Flush wallet database activity from memory to disk log every &lt;n&gt; megabytes (default: %u)&quot;, DEFAULT_WALLET_DBLOGSIZE), true, OptionsCategory::WALLET_DEBUG_TEST);</span>
<span class="lineNum">      69 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-flushwallet&quot;, strprintf(&quot;Run a thread to flush wallet periodically (default: %u)&quot;, DEFAULT_FLUSHWALLET), true, OptionsCategory::WALLET_DEBUG_TEST);</span>
<span class="lineNum">      70 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-privdb&quot;, strprintf(&quot;Sets the DB_PRIVATE flag in the wallet db environment (default: %u)&quot;, DEFAULT_WALLET_PRIVDB), true, OptionsCategory::WALLET_DEBUG_TEST);</span>
<span class="lineNum">      71 </span>[<span class="branchCov" title="Branch 2 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>][<span class="branchCov" title="Branch 5 was taken 420 times"> + </span><span class="branchNoCov" title="Branch 6 was not taken"> - </span>]:<span class="lineCov">        420 :     gArgs.AddArg(&quot;-walletrejectlongchains&quot;, strprintf(&quot;Wallet will not create transactions that violate mempool chain limits (default: %u)&quot;, DEFAULT_WALLET_REJECT_LONG_CHAINS), true, OptionsCategory::WALLET_DEBUG_TEST);</span>
<a name="72"><span class="lineNum">      72 </span>                :<span class="lineCov">        420 : }</span></a>
<span class="lineNum">      73 </span>                :            : 
<span class="lineNum">      74 </span>                :<span class="lineCov">        405 : bool WalletInit::ParameterInteraction() const</span>
<span class="lineNum">      75 </span>                :            : {
<span class="lineNum">      76 </span>[<span class="branchCov" title="Branch 1 was taken 405 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 405 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        810 :     if (gArgs.GetBoolArg(&quot;-disablewallet&quot;, DEFAULT_DISABLE_WALLET)) {</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 6 was taken 23 times"> + </span><span class="branchCov" title="Branch 7 was taken 382 times"> + </span>]
<span class="lineNum">      77 </span>[<span class="branchCov" title="Branch 1 was taken 23 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 23 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">         46 :         for (const std::string&amp; wallet : gArgs.GetArgs(&quot;-wallet&quot;)) {</span>
<span class="lineNum">         </span>        [<span class="branchNoCov" title="Branch 6 was not taken"> - </span><span class="branchCov" title="Branch 7 was taken 23 times"> + </span>]
<span class="lineNum">      78 </span>        [<span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span>]:<span class="lineNoCov">          0 :             LogPrintf(&quot;%s: parameter interaction: -disablewallet -&gt; ignoring -wallet=%s\n&quot;, __func__, wallet);</span>
<span class="lineNum">      79 </span>                :            :         }
<span class="lineNum">      80 </span>                :            : 
<span class="lineNum">      81 </span>                :<span class="lineCov">         23 :         return true;</span>
<span class="lineNum">      82 </span>                :            :     }
<span class="lineNum">      83 </span>                :            : 
<span class="lineNum">      84 </span>[<span class="branchCov" title="Branch 1 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        382 :     const bool is_multiwallet = gArgs.GetArgs(&quot;-wallet&quot;).size() &gt; 1;</span>
<span class="lineNum">      85 </span>                :            : 
<span class="lineNum">      86 </span>[<span class="branchCov" title="Branch 1 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        764 :     if (gArgs.GetBoolArg(&quot;-blocksonly&quot;, DEFAULT_BLOCKSONLY) &amp;&amp; gArgs.SoftSetBoolArg(&quot;-walletbroadcast&quot;, false)) {</span>
<span class="lineNum">         </span>[<span class="branchNoCov" title="Branch 6 was not taken"> - </span><span class="branchCov" title="Branch 7 was taken 382 times"> + </span>][<span class="branchNoExec" title="Branch 9 was not executed"> # </span><span class="branchNoExec" title="Branch 10 was not executed"> # </span>]
<span class="lineNum">         </span>[<span class="branchNoExec" title="Branch 12 was not executed"> # </span><span class="branchNoExec" title="Branch 13 was not executed"> # </span>][<span class="branchNoExec" title="Branch 14 was not executed"> # </span><span class="branchNoExec" title="Branch 15 was not executed"> # </span>]
<span class="lineNum">         </span>[<span class="branchNoCov" title="Branch 16 was not taken"> - </span><span class="branchCov" title="Branch 17 was taken 382 times"> + </span>][<span class="branchNoCov" title="Branch 18 was not taken"> - </span><span class="branchCov" title="Branch 19 was taken 382 times"> + </span> 
<span class="lineNum">         </span>   <span class="branchNoExec" title="Branch 20 was not executed"> # </span><span class="branchNoExec" title="Branch 21 was not executed"> # </span><span class="branchNoExec" title="Branch 22 was not executed"> # </span><span class="branchNoExec" title="Branch 23 was not executed"> # </span>]
<span class="lineNum">      87 </span>                :<span class="lineNoCov">          0 :         LogPrintf(&quot;%s: parameter interaction: -blocksonly=1 -&gt; setting -walletbroadcast=0\n&quot;, __func__);</span>
<span class="lineNum">      88 </span>                :            :     }
<span class="lineNum">      89 </span>                :            : 
<span class="lineNum">      90 </span>[<span class="branchCov" title="Branch 1 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 382 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        764 :     if (gArgs.GetBoolArg(&quot;-salvagewallet&quot;, false)) {</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 6 was taken 4 times"> + </span><span class="branchCov" title="Branch 7 was taken 378 times"> + </span>]
<span class="lineNum">      91 </span>        [<span class="branchCov" title="Branch 0 was taken 4 times"> + </span><span class="branchNoCov" title="Branch 1 was not taken"> - </span>]:<span class="lineCov">          4 :         if (is_multiwallet) {</span>
<span class="lineNum">      92 </span>        [<span class="branchCov" title="Branch 2 was taken 4 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">          8 :             return InitError(strprintf(&quot;%s is only allowed with a single wallet file&quot;, &quot;-salvagewallet&quot;));</span>
<span class="lineNum">      93 </span>                :            :         }
<span class="lineNum">      94 </span>                :            :         // Rewrite just private keys: rescan to find transactions
<span class="lineNum">      95 </span>[<span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span>][<span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]:<span class="lineNoCov">          0 :         if (gArgs.SoftSetBoolArg(&quot;-rescan&quot;, true)) {</span>
<span class="lineNum">         </span>        [<span class="branchNoExec" title="Branch 6 was not executed"> # </span><span class="branchNoExec" title="Branch 7 was not executed"> # </span>]
<span class="lineNum">      96 </span>                :<span class="lineNoCov">          0 :             LogPrintf(&quot;%s: parameter interaction: -salvagewallet=1 -&gt; setting -rescan=1\n&quot;, __func__);</span>
<span class="lineNum">      97 </span>                :            :         }
<span class="lineNum">      98 </span>                :            :     }
<span class="lineNum">      99 </span>                :            : 
<span class="lineNum">     100 </span>[<span class="branchCov" title="Branch 1 was taken 378 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 378 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        378 :     bool zapwallettxes = gArgs.GetBoolArg(&quot;-zapwallettxes&quot;, false);</span>
<span class="lineNum">     101 </span>                :            :     // -zapwallettxes implies dropping the mempool on startup
<span class="lineNum">     102 </span>[<span class="branchCov" title="Branch 0 was taken 14 times"> + </span><span class="branchCov" title="Branch 1 was taken 364 times"> + </span>][<span class="branchCov" title="Branch 4 was taken 14 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        392 :     if (zapwallettxes &amp;&amp; gArgs.SoftSetBoolArg(&quot;-persistmempool&quot;, false)) {</span>
<span class="lineNum">         </span>[<span class="branchCov" title="Branch 6 was taken 1 time"> + </span><span class="branchCov" title="Branch 7 was taken 13 times"> + </span>][<span class="branchCov" title="Branch 8 was taken 14 times"> + </span><span class="branchCov" title="Branch 9 was taken 364 times"> + </span>]
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 10 was taken 13 times"> + </span><span class="branchCov" title="Branch 11 was taken 365 times"> + </span>]
<span class="lineNum">     103 </span>                :<span class="lineCov">         13 :         LogPrintf(&quot;%s: parameter interaction: -zapwallettxes enabled -&gt; setting -persistmempool=0\n&quot;, __func__);</span>
<span class="lineNum">     104 </span>                :            :     }
<span class="lineNum">     105 </span>                :            : 
<span class="lineNum">     106 </span>                :            :     // -zapwallettxes implies a rescan
<span class="lineNum">     107 </span>        [<span class="branchCov" title="Branch 0 was taken 14 times"> + </span><span class="branchCov" title="Branch 1 was taken 364 times"> + </span>]:<span class="lineCov">        378 :     if (zapwallettxes) {</span>
<span class="lineNum">     108 </span>        [<span class="branchCov" title="Branch 0 was taken 6 times"> + </span><span class="branchCov" title="Branch 1 was taken 8 times"> + </span>]:<span class="lineCov">         14 :         if (is_multiwallet) {</span>
<span class="lineNum">     109 </span>        [<span class="branchCov" title="Branch 2 was taken 6 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">         12 :             return InitError(strprintf(&quot;%s is only allowed with a single wallet file&quot;, &quot;-zapwallettxes&quot;));</span>
<span class="lineNum">     110 </span>                :            :         }
<span class="lineNum">     111 </span>[<span class="branchCov" title="Branch 1 was taken 8 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 8 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">         16 :         if (gArgs.SoftSetBoolArg(&quot;-rescan&quot;, true)) {</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 6 was taken 8 times"> + </span><span class="branchNoCov" title="Branch 7 was not taken"> - </span>]
<span class="lineNum">     112 </span>                :<span class="lineCov">          8 :             LogPrintf(&quot;%s: parameter interaction: -zapwallettxes enabled -&gt; setting -rescan=1\n&quot;, __func__);</span>
<span class="lineNum">     113 </span>                :            :         }
<span class="lineNum">     114 </span>                :            :     }
<span class="lineNum">     115 </span>                :            : 
<span class="lineNum">     116 </span>        [<span class="branchCov" title="Branch 0 was taken 16 times"> + </span><span class="branchCov" title="Branch 1 was taken 356 times"> + </span>]:<span class="lineCov">        372 :     if (is_multiwallet) {</span>
<span class="lineNum">     117 </span>[<span class="branchCov" title="Branch 1 was taken 16 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 16 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">         32 :         if (gArgs.GetBoolArg(&quot;-upgradewallet&quot;, false)) {</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 6 was taken 4 times"> + </span><span class="branchCov" title="Branch 7 was taken 12 times"> + </span>]
<span class="lineNum">     118 </span>        [<span class="branchCov" title="Branch 2 was taken 4 times"> + </span><span class="branchNoCov" title="Branch 3 was not taken"> - </span>]:<span class="lineCov">          8 :             return InitError(strprintf(&quot;%s is only allowed with a single wallet file&quot;, &quot;-upgradewallet&quot;));</span>
<span class="lineNum">     119 </span>                :            :         }
<span class="lineNum">     120 </span>                :            :     }
<span class="lineNum">     121 </span>                :            : 
<span class="lineNum">     122 </span>[<span class="branchCov" title="Branch 1 was taken 368 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 368 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        736 :     if (gArgs.GetBoolArg(&quot;-sysperms&quot;, false))</span>
<span class="lineNum">         </span>        [<span class="branchNoCov" title="Branch 6 was not taken"> - </span><span class="branchCov" title="Branch 7 was taken 368 times"> + </span>]
<span class="lineNum">     123 </span>[<span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span>][<span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]:<span class="lineNoCov">          0 :         return InitError(&quot;-sysperms is not allowed in combination with enabled wallet functionality&quot;);</span>
<span class="lineNum">     124 </span>[<span class="branchCov" title="Branch 1 was taken 368 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 368 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        736 :     if (gArgs.GetArg(&quot;-prune&quot;, 0) &amp;&amp; gArgs.GetBoolArg(&quot;-rescan&quot;, false))</span>
<span class="lineNum">         </span>[<span class="branchCov" title="Branch 6 was taken 3 times"> + </span><span class="branchCov" title="Branch 7 was taken 365 times"> + </span>][<span class="branchCov" title="Branch 9 was taken 3 times"> + </span><span class="branchNoCov" title="Branch 10 was not taken"> - </span>]
<span class="lineNum">         </span>[<span class="branchCov" title="Branch 12 was taken 3 times"> + </span><span class="branchNoCov" title="Branch 13 was not taken"> - </span>][<span class="branchCov" title="Branch 14 was taken 3 times"> + </span><span class="branchNoCov" title="Branch 15 was not taken"> - </span>]
<span class="lineNum">         </span>[<span class="branchCov" title="Branch 16 was taken 3 times"> + </span><span class="branchCov" title="Branch 17 was taken 365 times"> + </span>][<span class="branchNoCov" title="Branch 18 was not taken"> - </span><span class="branchCov" title="Branch 19 was taken 368 times"> + </span> 
<span class="lineNum">         </span>   <span class="branchNoExec" title="Branch 20 was not executed"> # </span><span class="branchNoExec" title="Branch 21 was not executed"> # </span><span class="branchNoExec" title="Branch 22 was not executed"> # </span><span class="branchNoExec" title="Branch 23 was not executed"> # </span>]
<span class="lineNum">     125 </span>        [<span class="branchNoExec" title="Branch 2 was not executed"> # </span><span class="branchNoExec" title="Branch 3 was not executed"> # </span>]:<span class="lineNoCov">          0 :         return InitError(_(&quot;Rescans are not possible in pruned mode. You will need to use -reindex which will download the whole blockchain again.&quot;));</span>
<span class="lineNum">     126 </span>                :            : 
<span class="lineNum">     127 </span>        [<span class="branchNoCov" title="Branch 0 was not taken"> - </span><span class="branchCov" title="Branch 1 was taken 368 times"> + </span>]:<span class="lineCov">        368 :     if (::minRelayTxFee.GetFeePerK() &gt; HIGH_TX_FEE_PER_KB)</span>
<span class="lineNum">     128 </span>[<span class="branchNoExec" title="Branch 1 was not executed"> # </span><span class="branchNoExec" title="Branch 2 was not executed"> # </span>][<span class="branchNoExec" title="Branch 4 was not executed"> # </span><span class="branchNoExec" title="Branch 5 was not executed"> # </span>]:<span class="lineNoCov">          0 :         InitWarning(AmountHighWarn(&quot;-minrelaytxfee&quot;) + &quot; &quot; +</span>
<span class="lineNum">         </span>[<span class="branchNoExec" title="Branch 7 was not executed"> # </span><span class="branchNoExec" title="Branch 8 was not executed"> # </span>][<span class="branchNoExec" title="Branch 10 was not executed"> # </span><span class="branchNoExec" title="Branch 11 was not executed"> # </span>]
<span class="lineNum">         </span>        [<span class="branchNoExec" title="Branch 13 was not executed"> # </span><span class="branchNoExec" title="Branch 14 was not executed"> # </span>]
<span class="lineNum">     129 </span>                :<span class="lineCov">        405 :                     _(&quot;The wallet will avoid paying less than the minimum relay fee.&quot;));</span>
<span class="lineNum">     130 </span>                :            : 
<span class="lineNum">     131 </span>                :            :     return true;
<a name="132"><span class="lineNum">     132 </span>                :            : }</a>
<span class="lineNum">     133 </span>                :            : 
<span class="lineNum">     134 </span>                :<span class="lineCov">        388 : void WalletInit::Construct(InitInterfaces&amp; interfaces) const</span>
<span class="lineNum">     135 </span>                :            : {
<span class="lineNum">     136 </span>[<span class="branchCov" title="Branch 1 was taken 388 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 388 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        776 :     if (gArgs.GetBoolArg(&quot;-disablewallet&quot;, DEFAULT_DISABLE_WALLET)) {</span>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 6 was taken 23 times"> + </span><span class="branchCov" title="Branch 7 was taken 365 times"> + </span>]
<span class="lineNum">     137 </span>                :<span class="lineCov">         23 :         LogPrintf(&quot;Wallet disabled!\n&quot;);</span>
<span class="lineNum">     138 </span>                :<span class="lineCov">         23 :         return;</span>
<span class="lineNum">     139 </span>                :            :     }
<a name="140"><span class="lineNum">     140 </span>[<span class="branchCov" title="Branch 1 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">        365 :     gArgs.SoftSetArg(&quot;-wallet&quot;, &quot;&quot;);</span></a>
<span class="lineNum">         </span>        [<span class="branchCov" title="Branch 7 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>]
<span class="lineNum">     141 </span>[<span class="branchCov" title="Branch 1 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 4 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 5 was not taken"> - </span>]:<span class="lineCov">       1118 :     interfaces.chain_clients.emplace_back(interfaces::MakeWalletClient(*interfaces.chain, gArgs.GetArgs(&quot;-wallet&quot;)));</span>
<span class="lineNum">         </span>[<span class="branchCov" title="Branch 7 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 8 was not taken"> - </span>][<span class="branchCov" title="Branch 10 was taken 365 times"> + </span><span class="branchNoCov" title="Branch 11 was not taken"> - </span>]
<span class="lineNum">     142 </span>[<span class="branchCov" title="Branch 1 was taken 495 times"> + </span><span class="branchNoCov" title="Branch 2 was not taken"> - </span>][<span class="branchCov" title="Branch 3 was taken 495 times"> + </span><span class="branchNoCov" title="Branch 4 was not taken"> - </span>]:<span class="lineCov">       1980 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
